# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏ Next.js

## –ü—Ä–æ–±–ª–µ–º–∞: "Module parse failed: Unexpected token (#target in this)"

–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ Next.js –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å `undici` (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å Firebase), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–æ–ª—è JavaScript (`#target`).

## –†–µ—à–µ–Ω–∏–µ

–Ø –æ–±–Ω–æ–≤–∏–ª `next.config.js` —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å `undici` –∏–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–∞–Ω–¥–ª–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–û–±–Ω–æ–≤–ª—ë–Ω Next.js** –¥–æ –≤–µ—Ä—Å–∏–∏ `^14.2.0` (–±–æ–ª–µ–µ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è webpack** –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è `undici` –∏–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–∞–Ω–¥–ª–∞
3. **–ù–∞—Å—Ç—Ä–æ–µ–Ω `output: 'standalone'`** –¥–ª—è Netlify

## –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `package.json` –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
cd frontend
rm -rf node_modules package-lock.json
npm install
```

–ò–ª–∏ –Ω–∞ Windows:
```bash
cd frontend
rmdir /s /q node_modules
del package-lock.json
npm install
```

## –ó–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
npm run dev
```

–ò–ª–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏:

```bash
npm run build
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ:

1. –û–±–Ω–æ–≤–∏—Ç—å Node.js –¥–æ –≤–µ—Ä—Å–∏–∏ 18.17+ –∏–ª–∏ 20+
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `experimental.serverComponentsExternalPackages` –≤ `next.config.js`:

```js
experimental: {
  serverComponentsExternalPackages: ['undici'],
}
```

–ù–æ —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.







