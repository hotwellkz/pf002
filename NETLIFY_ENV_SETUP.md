# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Netlify

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### 1. NEXT_PUBLIC_API_URL
**–ö–ª—é—á:** `NEXT_PUBLIC_API_URL`  
**–ó–Ω–∞—á–µ–Ω–∏–µ:** URL –≤–∞—à–µ–≥–æ backend –Ω–∞ Synology

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ–º–µ–Ω: `https://api.yourdomain.com` (—á–µ—Ä–µ–∑ reverse proxy)
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–Ω–µ—à–Ω–∏–π IP: `http://YOUR_EXTERNAL_IP:3000`
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ DDNS: `http://your-ddns-name.synology.me:3000`

**–ü—Ä–∏–º–µ—Ä:**
```
NEXT_PUBLIC_API_URL=http://192.168.100.222:3000
```
–∏–ª–∏ –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
```
NEXT_PUBLIC_API_URL=http://your-external-ip:3000
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3000 –æ—Ç–∫—Ä—ã—Ç –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ reverse proxy –≤ Synology (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è HTTPS)

## –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Firebase

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–æ–¥–µ, –Ω–æ –º–æ–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏—Ö –≤ Netlify:

### 2. NEXT_PUBLIC_FIREBASE_API_KEY
**–ö–ª—é—á:** `NEXT_PUBLIC_FIREBASE_API_KEY`  
**–ó–Ω–∞—á–µ–Ω–∏–µ:** `AIzaSyB0AxrtCw0QYxEHbxGExVfRlDoz0OGtfTI`

### 3. NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
**–ö–ª—é—á:** `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`  
**–ó–Ω–∞—á–µ–Ω–∏–µ:** `playflon.firebaseapp.com`

### 4. NEXT_PUBLIC_FIREBASE_PROJECT_ID
**–ö–ª—é—á:** `NEXT_PUBLIC_FIREBASE_PROJECT_ID`  
**–ó–Ω–∞—á–µ–Ω–∏–µ:** `playflon`

### 5. NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
**–ö–ª—é—á:** `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET`  
**–ó–Ω–∞—á–µ–Ω–∏–µ:** `playflon.firebasestorage.app`

### 6. NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
**–ö–ª—é—á:** `NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID`  
**–ó–Ω–∞—á–µ–Ω–∏–µ:** `309141897476`

### 7. NEXT_PUBLIC_FIREBASE_APP_ID
**–ö–ª—é—á:** `NEXT_PUBLIC_FIREBASE_APP_ID`  
**–ó–Ω–∞—á–µ–Ω–∏–µ:** `1:309141897476:web:d117f2a297ea06d1a61051`

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Netlify

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ [Netlify Dashboard](https://app.netlify.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Site settings** ‚Üí **Environment variables**
3. –ù–∞–∂–º–∏—Ç–µ **Add a variable**
4. –î–æ–±–∞–≤—å—Ç–µ –∫–∞–∂–¥—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Key:** –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `NEXT_PUBLIC_API_URL`)
   - **Value:** –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
   - **Scopes:** –≤—ã–±–µ—Ä–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Production, Deploy previews, Branch deploys)
5. –ù–∞–∂–º–∏—Ç–µ **Save**

## –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

```
NEXT_PUBLIC_API_URL=http://YOUR_SYNOLOGY_IP:3000
```

–û—Å—Ç–∞–ª—å–Ω—ã–µ Firebase –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –∫–æ–¥–∞.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

1. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å–∞–π—Ç** –≤ Netlify (Deploy settings ‚Üí Trigger deploy)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ DevTools (F12) ‚Üí Console:
   - –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API URL
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ CORS
   - –ó–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –Ω–∞ –≤–∞—à backend

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ backend

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –ø–æ IP (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

1. –£–∑–Ω–∞–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π IP –≤–∞—à–µ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ:
   - –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç: 3000
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP: IP –≤–∞—à–µ–≥–æ Synology (–Ω–∞–ø—Ä–∏–º–µ—Ä, 192.168.100.222)
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç: 3000
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ Netlify: `http://YOUR_EXTERNAL_IP:3000`

### –í–∞—Ä–∏–∞–Ω—Ç 2: Reverse Proxy —á–µ—Ä–µ–∑ Synology (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –í Synology DSM –æ—Ç–∫—Ä–æ–π—Ç–µ **Control Panel** ‚Üí **Application Portal** ‚Üí **Reverse Proxy**
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–æ:
   - **Source Protocol:** HTTPS
   - **Source Hostname:** api.yourdomain.com
   - **Source Port:** 443
   - **Destination Protocol:** HTTP
   - **Destination Hostname:** localhost
   - **Destination Port:** 3000
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –¥–æ–º–µ–Ω–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ Netlify: `https://api.yourdomain.com`

### –í–∞—Ä–∏–∞–Ω—Ç 3: DDNS —á–µ—Ä–µ–∑ Synology

1. –í Synology DSM –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ **Control Panel** ‚Üí **External Access** ‚Üí **DDNS**
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ Netlify: `http://your-ddns-name.synology.me:3000`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã backend

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –¥–æ—Å—Ç—É–ø–µ–Ω:

```bash
curl http://YOUR_BACKEND_URL/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON:
```json
{"status":"ok","timestamp":"2024-12-30T..."}
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **CORS:** Backend –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å `cors()` –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ Netlify.

2. **HTTPS:** –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ reverse proxy –≤ Synology.

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Netlify, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `NEXT_PUBLIC_` (–æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ).

4. **–ü–æ—Ä—Ç—ã:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3000 –æ—Ç–∫—Ä—ã—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.





